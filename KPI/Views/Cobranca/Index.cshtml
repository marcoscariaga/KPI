@{
    ViewData["Title"] = "Total arrecadado por ano";
}

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

@using Highsoft.Web.Mvc.Charts
@using Highsoft.Web.Mvc.Charts.Rendering

@model List<KPI.Models.CobrancaSisvisa>

@{
    var chartOptions = new Highcharts
    {
        Title = new Title
        {
            Text = "Total arrecadado por ano"
        },
        XAxis = new List<XAxis> {
        new XAxis {
          Categories = new List <string> {"2019","2020","2021","2022","2023"},
          Title = new XAxisTitle {
              Text = "Receitas"
          }
        }
      },
        YAxis = new List<YAxis> {
        new YAxis {
          Min = 0,
            Title = new YAxisTitle {
              Text = "Valores"
            }
        }
      },
        Tooltip = new Tooltip
        {
            HeaderFormat = "<span style='font-size:10px'>{point.key}</span><table style='font-size:12px'>",
            PointFormat = "<tr><td style='color:{series.color};padding:1'>Receita {series.name}: </td><td style='padding:1'><b>R$ {point.y:.2f}</b></td></tr>",
            FooterFormat = "</table>",
            Shared = true,
            UseHTML = true
        },
        PlotOptions = new PlotOptions
        {
            Column = new PlotOptionsColumn
            {
                PointPadding = 0.2,
                BorderWidth = 0
            }
        },
        Series = new List<Series> {
        new ColumnSeries {
            Name = "5207 (x100)",
            Data = (List<ColumnSeriesData>)ViewData["cd5207Data"]
        },
        new ColumnSeries {
            Name = "5223",
            Data = (List<ColumnSeriesData>)ViewData["cd5223Data"]
        },
        new ColumnSeries {
            Name = "5231",
            Data = (List<ColumnSeriesData>)ViewData["cd5231Data"]
        },
        new ColumnSeries {
            Name = "5274",
            Data = (List<ColumnSeriesData>)ViewData["cd5274Data"]
        }
      }
    };

    chartOptions.ID = "chart";
    var renderer = new HighchartsRenderer(chartOptions);
}

<div class="card">
<div class="card-body">
@Html.Raw(renderer.RenderHtml())
</div>
</div>

<div class="card">
<div class="card-body">
        <h2>Total de arrecadação em @ViewBag.Year</h2>
        <p></p>
<table class="table">
    <thead>
        <tr>
            <th>
                Receita 
            </th>
            <th>
                Total de Valores Cobrados
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @item.CdReceita
                </td>
                <td>
                    @item.VlPrincipal.ToString("C")
                </td>
                <td>
                </td>
            </tr>
        }
    </tbody>
    <tfoot>
        <tr>
            <th>
                Total
            </th>
            <th>
                @ViewBag.Total
            </th>
            <th></th>
        </tr>
    </tfoot>
</table>
</div>
</div>