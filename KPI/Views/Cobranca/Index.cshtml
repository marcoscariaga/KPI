@{
    ViewData["Title"] = "Total arrecadado por ano";
}

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>


@using Highsoft.Web.Mvc.Charts
@using Highsoft.Web.Mvc.Charts.Rendering

@model List<KPI.Models.CobrancaSisvisa>

@{
    var chartOptions = new Highcharts
    {
        Title = new Title
        {
            Text = "Total arrecadado por ano"
        },
        XAxis = new List<XAxis> {
        new XAxis {
                Categories = new List <string> {"2019","2020","2021","2022","2023"}
            }
        },
        YAxis = new List<YAxis> {
        new YAxis {
            Title = new YAxisTitle { Text = "Valores" },
            PlotLines = new List<YAxisPlotLines> { new YAxisPlotLines { Value = 0, Width = 1, Color = "#808080" } }
        }
      },
        Tooltip = new Tooltip
        {
            HeaderFormat = "<span style='font-size:10px'>{point.key}</span><br><table style='font-size:12px'>",
            PointFormat = "R$ {point.y:.2f}"
        },
        Legend = new Legend
        {
            Layout = LegendLayout.Vertical,
            Align = LegendAlign.Right,
            VerticalAlign = LegendVerticalAlign.Middle,
            Title = new LegendTitle { Text = "Código Receita:" },
            BorderWidth = 0
        },
        Series = new List<Series> {
        new LineSeries { Name = "5207 (x100)", Data = (List<LineSeriesData>)ViewData["cd5207Data"] },
        new LineSeries { Name = "5223", Data = (List<LineSeriesData>)ViewData["cd5223Data"] },
        new LineSeries { Name = "5231", Data = (List<LineSeriesData>)ViewData["cd5231Data"] },
        new LineSeries { Name = "5274", Data = (List<LineSeriesData>)ViewData["cd5274Data"] }
      }
    };

    chartOptions.ID = "chart";
    var renderer = new HighchartsRenderer(chartOptions);
}

<div class="card">
<div class="card-body">
@Html.Raw(renderer.RenderHtml())
</div>
</div>
</br>
<div class="card">
<div class="card-body">
        <h2>Total de arrecadação em @ViewBag.Year</h2>
        <p></p>
<table class="table">
    <thead>
        <tr>
            <th>
                Receita 
            </th>
            <th>
                Total de Valores Cobrados
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @item.CdReceita
                </td>
                <td>
                    @item.VlPrincipal.ToString("C")
                </td>
                <td>
                </td>
            </tr>
        }
    </tbody>
    <tfoot>
        <tr>
            <th>
                Total
            </th>
            <th>
                @ViewBag.Total
            </th>
            <th></th>
        </tr>
    </tfoot>
</table>
</div>
</div>